function toggleMenu(e,t=!0){if(t){if(window.matchMedia("(min-width: 768px)").matches)return;if(!(e.target.closest(".menu")||e.target.closest(".burger")||e.target.closest(".overley:not(form")))return;console.log(e)}let o=document.querySelector(".menu");o.classList.toggle("open"),t=o.classList.contains("open"),document.querySelector(".writing").classList.toggle("left",t),toggleOverley(t),toggleBurger(t)}function toggleBurger(e){document.querySelector(".burger").classList.toggle("hide",e)}function toggleOverley(e,t=""){t&&(t=`.${t}`),document.querySelector(`.overley${t}`).classList.toggle("open",e),toggleOverflow(e)}function toggleOverflow(e){document.body.classList.toggle("fixed",e)}function checkTheme(){let e=window.localStorage.getItem("dark");"false"==e||null==e?(window.localStorage.setItem("dark","false"),document.body.classList.add("light")):(window.localStorage.setItem("dark","true"),document.body.classList.add("dark")),toggleIcon()}function toggleIcon(){let e=document.querySelectorAll(".icon");e=Array.from(e),e=e.map(toggleSrc)}function toggleSrc(e){let t="true"==window.localStorage.getItem("dark")?"dark":"light",o="true"==window.localStorage.getItem("dark")?"light":"dark",r=e.src.split(t);r=r.join(o),e.src=r}function toggleTheme(e){if(!e.target.closest(".theme"))return;let t=window.localStorage.getItem("dark");t="true"!=t,window.localStorage.setItem("dark",t),document.body.classList.toggle("dark",t),document.body.classList.toggle("light",!t),toggleIcon()}function toggleWritingIcon(e){let t=document.querySelector(".writing");t.classList.toggle("hide",e),t.classList.remove("left")}function toggleForm(e){if(!e.target.closest(".writing")&&!e.target.closest(".close"))return;let t=document.querySelector(".popup");e.target.closest(".close")&&document.forms[0].reset(),t.classList.toggle("open");let o=t.classList.contains("open");o?addListeners():removeListeners(),document.querySelector(".overley").classList.contains("open")&&toggleMenu(null,!o),toggleOverley(o,"form"),toggleWritingIcon(o)}function closeMenu(){if(window.matchMedia("(min-width: 768px) and (orientation:landscape)").matches){let e=document.querySelector(".overley").classList.contains("open");e&&toggleMenu(null,!e)}}function validateEmail(e){let t=e.target.value.match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/);return e.target.classList.toggle("invalid",!t),t}function isEmpty(e){let t=e.target.value,o=Boolean(t);e.target.classList.toggle("invalid",!o)}function validateForm(){let e=document.forms[0],t=e.querySelector(".submit");if(e.bucket.value)return!1;let o=Boolean(e.querySelectorAll(".invalid").length);t.classList.toggle("inactive",o),o||t.addEventListener("click",setData)}function addListeners(){let e=document.forms[0],t=e.querySelectorAll("input"),o=e.querySelector("textarea");t=[...t,o],t.forEach((e=>{if("email"==e.type)return e.addEventListener("input",validateEmail);e.classList.contains("bucket")||e.addEventListener("input",isEmpty)}))}function removeListeners(){let e=document.forms[0],t=e.querySelectorAll("input"),o=e.querySelector("textarea");t=[...t,o],t.forEach((e=>{if("email"==e.type)return e.removeEventListener("input",validateEmail);e.classList.contains("bucket")||e.removeEventListener("input",isEmpty)}))}import{initializeApp}from"https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";import{getDatabase,ref,set}from"https://www.gstatic.com/firebasejs/9.6.10/firebase-database.js";const firebaseConfig={apiKey:"AIzaSyCukmuh4VplvLpM3XQzlkGCuyGgX7x2y18",authDomain:"grastor-messagestorage.firebaseapp.com",databaseURL:"https://grastor-messagestorage-default-rtdb.firebaseio.com",projectId:"grastor-messagestorage",storageBucket:"grastor-messagestorage.appspot.com",messagingSenderId:"189811633204",appId:"1:189811633204:web:cddbbdee2964375bd86e61",measurementId:"G-G4SXGQZLE1"},app=initializeApp(firebaseConfig),done={ru:"Данные записаны",en:"Data recorded"},errors={ru:"Что-то пошло не так",en:"Something went wrong"};function setData(){let e=document.documentElement.lang;showPreloader();let t=createIDmsg(),o=createData();if("string"==typeof o)return alert(o);const r=getDatabase();set(ref(r,"messages/"+t),o).then((()=>{showResult(done[e]),setTimeout(returnStyles,1e3)})).catch((t=>{showResult(errors[e],t),setTimeout(returnStyles,1e3)}))}function createIDmsg(){let e=(new Date).toLocaleString("ru-RU");return e=e.replaceAll(/[\.:]/g,"-").replace(/,/,""),e}function createData(){let e=document.forms[0];return{name:e.name.value,email:e.email.value,message:e.message.value}}function returnStyles(){let e=document.querySelector(".result");e.textContent="",e.classList.remove("show"),e.classList.remove("error");let t=document.forms[0];t.reset(),t.removeAttribute("style"),t.querySelector(".container").removeAttribute("style"),document.querySelector(".popup").classList.remove("open"),document.querySelector(".overley.form").classList.remove("open")}function showResult(e,t=!1){let o=document.querySelector(".preloader"),r=document.querySelector(".result");o.classList.remove("show"),r.classList.add("show"),t&&(r.classList.add("error"),console.log(t)),r.textContent=e}function showPreloader(){let e=document.querySelector(".preloader"),t=document.forms[0],[o,r]=[t.offsetWidth-96,t.offsetHeight-96];t.querySelector(".container").style.display="none",t.style.width=o+"px",t.style.height=r+"px",e.classList.add("show")}document.addEventListener("click",toggleMenu),document.addEventListener("DOMContentLoaded",checkTheme),document.addEventListener("click",toggleTheme),document.addEventListener("click",toggleForm),window.addEventListener("resize",closeMenu),document.querySelector("form").addEventListener("input",validateForm);